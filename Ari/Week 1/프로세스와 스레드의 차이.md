# 프로세스와 스레드의 차이

* 프로세스는 운영체제로부터 시스템 자원을 할당받는 작업의 단위를 의미합니다.
* 프로세스는 각각의 독립된 메모리 영역을 각자 할당받습니다.
* 스레드는 한 프로세스 내에서 동작되는 여러 실행의 흐름을 의미합니다.
* 즉 프로세스가 아닌 프로세스 내에서 동작되는 것이기 때문에 메모리 영역을 독립적으로 할당받지 못합니다.
* 스택을 제외한 나머지 메모리 영역은 스레드끼리 공유하는 형태입니다.

#

1. 프로세스는 프로그램이 실행된 것
2. 스레드는 한 프로세스 내에서 나뉘어진 하나 이상의 실행 단위
3. 한 어플리케이션에 대한 작업을 동시에 하기 위해서는 2가지 처리방식이 있다.
    1. 멀티 프로세스
    2. 멀티 스레드
4. 동시에 실행되는 것처럼 보이기 위해서 실행 단위는 시분할로 CPU로 점유하여 context switching을 한다.
5. 멀티 프로세스는 독립적인 메모리를 가지고 있지만 멀티스레드는 자원을 공유한다.
6. 멀티 코어는 하드웨어 측면에서 실행 단위를 병렬적으로 처리할 수 있도록 여러 프로세스가 있는 것

||멀티 프로세스|멀티 스레드|
|:-:|:-:|:-:|
|정의|하나의 프로그램을 여러개의 프로세스로 구성하여 각 프로세스마다 하나의 실행단위를 처리하도록 하는 것|하나의 프로그램을 여러개의 스레드로 구성하여 각 스레드마다 하나의 실행단위를 처리하도록 하는 것|
|생성/종료 시간|많은 시간 소요|적은 시간 소요|
|Context Switching|많은 시간 소요|적은 시간 소요|
|자원 접근|IPC 사용|공유 자원 사용|
|메모리 할당|메모리 영역을 모두 독립적으로 할당받음|Stack 영역을 제외한 나머지 영역은 공유함|
|장점|독립된 구조라서 안전성이 높다.|Context Switching, 생성/종료 시간이 빠르다.</br>프로세스 간 자원 공유가 간단하다.|
|단점|Context Switching시 시간이 많이 소요되는 등 오버헤드 발생</br>생성/종료 시간이 오래걸림</br>프로세스 간 자원 공유가 어렵다.|설계가 까다롭다.</br>동기화 문제가 있다.</br>하나의 스레드에서 문제 발생 시 전체 스레드에 영향이 간다.|

#

 </br>

## 프로세스란?

* 실행중인 프로그램을 의미한다.

> `wikipedia` </br>
> Process란 하나 혹은 그 이상의 Thread로 실행되는 컴퓨터 프로그램의 instance이다. Process는 Program code와 그 activity를 포함한다. </br>

> `microsoft` </br>
> 프로세스는 가상 메모리 공간, 코드, 데이터, 시스템 자원의 집합이다.

프로세스는 운영체제가 프로그램을 실행하기 위해 필요한 가장 작은 단위의 스렏, 메모리, 소스코드들의 집합이며 프로그램 동작 그 자체를 의미한다. 운영체제는 `프로세스`를 작업(프로세스)의 단위로 보고 자원들을 작업들에게 적절하게 분배한다.

* 프로세스의 문맥(context)
  * CPU 수행 상태를 나타내는 하드웨어 문맥
    * Program Counter
    * 각종 register
  * 프로세스의 주소 공간
    * Code, Data, Stack
    * 프로세스 관련 커널 자료구조
      * PCB(Process Control Block)
      * Kernel Stack

 </br>

## 스레드란?

* 프로세스 내에 나뉘어진 하나 이상의 실행 단위를 의미한다.
* 스레드(= lightweight process)는 프로세스 내부의 CPU 실행 단위를 의미한다. 스레드는 최대한 자원을 공유하려고 하는데, 다만 CPU 수행과 관련된 정보(Program Counter, Register, Stack)는 따로 가지고 있다.


![image](https://user-images.githubusercontent.com/75905803/203538868-9f46a1c6-02ac-4856-9656-a1a0f266db20.png)

> A thread (or lightwright process) is a basic unit of CPU utilization

* 구성
    * Program Counter
    * Register Set
    * Stack Space
* 스레드가 동료 스레드와 공유하는 부분 (=task)
    * Code Section
    * Data Section
    * OS Resources

> 전통적인 개념의 heavywight process는 하나의 스레드를 가지고 있는 task로 볼 수 있다.

</br>

## 스레드를 사용하면 어떤 장점이 있을까?

* 다중 스레드로 구성된 Task 구조에서는 하나의 서버 스레드가 blocked(waiting) 상태인 동안에도 동일한 task 내의 다른 스레드가 실행(running)되어 빠른 처리를 할 수 있다.
    * 각각의 스레드들이 계속 여러 작업을 수행하면서 빠르게 처리할 수 있다
* 동일한 일을 수행하는 다중 스레드가 협력하여 높은 처리율(throughput)과 성능 향상을 얻을 수 있다.
    * 하나의 프로그램에 대해 여러 프로세스를 만드는 것이 아니라, 하나의 프로세스 안에 스레드를 여러 개 만들어 효율적으로 처리할 수 있다.
* 스레드를 사용하면 병렬성을 높일 수 있다.

</br>

# Reference

- [과거의 나의 기록](https://github.com/leeari95/CS_Study)
- [운영체제 강의(2014) - 반효경 교수님](http://www.kocw.net/home/search/kemView.do?kemId=1046323)
